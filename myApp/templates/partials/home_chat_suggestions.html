{% load static %}
<div class="flex gap-3 mb-4">
  <div class="flex-shrink-0">
    <div class="w-8 h-8 rounded-full bg-gradient-to-br from-orange-500 to-rose-500 flex items-center justify-center text-white text-sm font-semibold">
      AI
    </div>
  </div>
  <div class="flex-1">
    <div class="inline-block max-w-[95%] rounded-2xl bg-gradient-to-br from-orange-50 to-rose-50 px-4 py-3 text-gray-800 ring-1 ring-orange-100">
      <p class="text-sm leading-relaxed">{{ text }}</p>

      {% if properties %}
        <div class="mt-3 grid grid-cols-1 gap-3">
          {% for p in properties %}
            <div class="flex items-center gap-3 p-3 rounded-xl bg-white ring-1 ring-gray-200">
              <img src="{{ p.hero_image|default:'https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=400' }}"
                   alt="{{ p.title }}" class="w-16 h-12 rounded object-cover">
              <div class="flex-1 min-w-0">
                <div class="text-sm font-semibold truncate">{{ p.title }}</div>
                <div class="text-xs text-gray-600 truncate">
                  {{ p.city }}{% if p.area %}, {{ p.area }}{% endif %} â€¢ ${{ p.price_amount|floatformat:0 }}
                </div>
              </div>
              <!-- Quick View (modal) -->
              <button
                hx-get="{% url 'property_modal' p.slug %}"
                hx-target="#property-modal-content"
                hx-swap="innerHTML"
                onclick="document.getElementById('property-modal').classList.remove('hidden')"
                class="text-xs font-medium px-3 py-1.5 rounded-lg bg-gray-900 text-white hover:bg-gray-800">
                Quick view
              </button>
              <!-- Full page (fallback) -->
              <a href="{% url 'property_detail' p.slug %}" class="text-xs font-medium px-3 py-1.5 rounded-lg bg-orange-600 text-white hover:bg-orange-700">
                View
              </a>
            </div>
          {% endfor %}
        </div>
      {% endif %}
    </div>
  </div>
</div>