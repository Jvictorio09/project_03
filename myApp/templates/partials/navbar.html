{% load static %}
{% load extras %}

<!-- Premium Navigation Bar - Dark Theme -->
<nav class="sticky top-0 z-50 bg-slate-900/95 backdrop-blur-md border-b border-white/10 shadow-lg">
  <!-- Violet accent line -->
  <div class="h-[1px] bg-gradient-to-r from-violet-500 via-violet-400 to-violet-600"></div>
  
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      
      <!-- Logo -->
      <div class="flex-shrink-0">
        <a href="{% url 'home' %}" class="flex items-center space-x-3 group">
          <div class="w-8 h-8 bg-gradient-to-br from-violet-600 to-violet-500 rounded-lg flex items-center justify-center group-hover:scale-105 transition-transform duration-200">
            <i class="fas fa-home text-white text-sm"></i>
          </div>
          <span class="text-xl font-bold text-white group-hover:text-violet-300 transition-all duration-200">KaTek AI</span>
        </a>
      </div>

      <!-- Desktop Navigation -->
      <div class="hidden md:block">
        <div class="ml-10 flex items-baseline space-x-8">
          
          <!-- Products Dropdown -->
          <div class="relative group" x-data="{ open: false }" @mouseenter="open = true" @mouseleave="open = false">
            <button class="flex items-center space-x-1 text-gray-300 hover:text-white px-3 py-2 rounded-lg hover:bg-white/10 transition-all duration-200 font-medium">
              <span>Products</span>
              <i class="fas fa-chevron-down text-xs transition-transform duration-200" :class="{ 'rotate-180': open }"></i>
            </button>
            
            <!-- Dropdown Menu -->
            <div class="absolute left-0 mt-2 w-64 bg-slate-800/95 backdrop-blur-md rounded-xl shadow-2xl border border-white/10 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform translate-y-2 group-hover:translate-y-0"
                 x-show="open" 
                 x-transition:enter="transition ease-out duration-200"
                 x-transition:enter-start="opacity-0 transform translate-y-2"
                 x-transition:enter-end="opacity-100 transform translate-y-0"
                 x-transition:leave="transition ease-in duration-150"
                 x-transition:leave-start="opacity-100 transform translate-y-0"
                 x-transition:leave-end="opacity-0 transform translate-y-2">
              
              <div class="py-2">
                <!-- Property IQ -->
                {% if flags.property_iq %}
                  <a href="{% url 'property_iq' %}" class="flex items-center px-4 py-3 text-sm text-gray-300 hover:bg-white/10 hover:text-white transition-colors duration-150">
                    <div class="w-8 h-8 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center mr-3">
                      <i class="fas fa-chart-line text-white text-xs"></i>
                    </div>
                    <div>
                      <div class="font-medium">Property IQ</div>
                      <div class="text-xs text-gray-400">AI-powered property insights</div>
                    </div>
                  </a>
                {% else %}
                  <div class="flex items-center px-4 py-3 text-sm text-gray-500 cursor-not-allowed" title="Coming soon">
                    <div class="w-8 h-8 bg-gray-600 rounded-lg flex items-center justify-center mr-3">
                      <i class="fas fa-chart-line text-gray-400 text-xs"></i>
                    </div>
                    <div>
                      <div class="font-medium">Property IQ</div>
                      <div class="text-xs text-gray-500">Coming soon</div>
                    </div>
                  </div>
                {% endif %}

                <!-- Lead Robot -->
                {% if flags.lead_robot %}
                  <a href="{% url 'lead_robot' %}" class="flex items-center px-4 py-3 text-sm text-gray-300 hover:bg-white/10 hover:text-white transition-colors duration-150">
                    <div class="w-8 h-8 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center mr-3">
                      <i class="fas fa-robot text-white text-xs"></i>
                    </div>
                    <div>
                      <div class="font-medium">Lead Robot</div>
                      <div class="text-xs text-gray-400">Automated lead qualification</div>
                    </div>
                  </a>
                {% else %}
                  <div class="flex items-center px-4 py-3 text-sm text-gray-500 cursor-not-allowed" title="Coming soon">
                    <div class="w-8 h-8 bg-gray-600 rounded-lg flex items-center justify-center mr-3">
                      <i class="fas fa-robot text-gray-400 text-xs"></i>
                    </div>
                    <div>
                      <div class="font-medium">Lead Robot</div>
                      <div class="text-xs text-gray-500">Coming soon</div>
                    </div>
                  </div>
                {% endif %}

                <!-- AI Concierge -->
                {% if flags.ai_concierge %}
                  <a href="{% url 'ai_concierge' %}" class="flex items-center px-4 py-3 text-sm text-gray-300 hover:bg-white/10 hover:text-white transition-colors duration-150">
                    <div class="w-8 h-8 bg-gradient-to-br from-violet-500 to-violet-600 rounded-lg flex items-center justify-center mr-3">
                      <i class="fas fa-concierge-bell text-white text-xs"></i>
                    </div>
                    <div>
                      <div class="font-medium">AI Concierge</div>
                      <div class="text-xs text-gray-400">24/7 customer service</div>
                    </div>
                  </a>
                {% else %}
                  <div class="flex items-center px-4 py-3 text-sm text-gray-500 cursor-not-allowed" title="Coming soon">
                    <div class="w-8 h-8 bg-gray-600 rounded-lg flex items-center justify-center mr-3">
                      <i class="fas fa-concierge-bell text-gray-400 text-xs"></i>
                    </div>
                    <div>
                      <div class="font-medium">AI Concierge</div>
                      <div class="text-xs text-gray-500">Coming soon</div>
                    </div>
                  </div>
                {% endif %}
              </div>
            </div>
          </div>

          <!-- Other Navigation Links -->
          <a href="{% url 'use_cases' %}" class="text-gray-300 hover:text-white px-3 py-2 rounded-lg hover:bg-white/10 transition-all duration-200 font-medium">Use Cases</a>
          <a href="{% url 'pricing' %}" class="text-gray-300 hover:text-white px-3 py-2 rounded-lg hover:bg-white/10 transition-all duration-200 font-medium">Pricing</a>
          <a href="{% url 'case_studies' %}" class="text-gray-300 hover:text-white px-3 py-2 rounded-lg hover:bg-white/10 transition-all duration-200 font-medium">Case Studies</a>
          <a href="{% url 'resources' %}" class="text-gray-300 hover:text-white px-3 py-2 rounded-lg hover:bg-white/10 transition-all duration-200 font-medium">Resources</a>
        </div>
      </div>

      <!-- Auth Buttons -->
      <div class="hidden md:flex items-center space-x-4">
        {% if user.is_authenticated %}
          <a href="{% url 'dashboard' %}" class="text-gray-300 hover:text-white px-3 py-2 rounded-lg hover:bg-white/10 transition-all duration-200 font-medium">Dashboard</a>
          <a href="{% url 'logout' %}" class="text-gray-300 hover:text-white px-3 py-2 rounded-lg hover:bg-white/10 transition-all duration-200 font-medium">Logout</a>
        {% else %}
          <a href="{% url 'login' %}" class="text-gray-300 hover:text-white px-3 py-2 rounded-lg hover:bg-white/10 transition-all duration-200 font-medium">Log in</a>
          <a href="{% url 'signup' %}" class="bg-gradient-to-r from-violet-600 to-violet-700 text-white px-4 py-2 rounded-lg hover:from-violet-700 hover:to-violet-800 transition-all duration-200 font-medium shadow-lg hover:shadow-violet-600/25 hover:-translate-y-0.5">Get Started</a>
        {% endif %}
      </div>

      <!-- Mobile menu button -->
      <div class="md:hidden">
        <button type="button" class="mobile-menu-button inline-flex items-center justify-center p-2 rounded-lg text-gray-300 hover:text-white hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-violet-500 transition-all duration-200" aria-controls="mobile-menu" aria-expanded="false">
          <span class="sr-only">Open main menu</span>
          <i class="fas fa-bars text-lg"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile menu -->
  <div class="mobile-menu hidden md:hidden" id="mobile-menu">
    <div class="px-2 pt-2 pb-3 space-y-1 bg-slate-800/95 backdrop-blur-md border-t border-white/10">
      
      <!-- Mobile Products Section -->
      <div class="mobile-products-section">
        <button class="mobile-products-toggle w-full flex items-center justify-between px-3 py-2 text-base font-medium text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200">
          <span>Products</span>
          <i class="fas fa-chevron-down text-sm transition-transform duration-200"></i>
        </button>
        
        <div class="mobile-products-menu hidden pl-4 space-y-1">
          <!-- Property IQ -->
          {% if flags.property_iq %}
            <a href="{% url 'property_iq' %}" class="flex items-center px-3 py-2 text-sm text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200">
              <div class="w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-md flex items-center justify-center mr-3">
                <i class="fas fa-chart-line text-white text-xs"></i>
              </div>
              <span>Property IQ</span>
            </a>
          {% else %}
            <div class="flex items-center px-3 py-2 text-sm text-gray-500 cursor-not-allowed">
              <div class="w-6 h-6 bg-gray-600 rounded-md flex items-center justify-center mr-3">
                <i class="fas fa-chart-line text-gray-400 text-xs"></i>
              </div>
              <span>Property IQ (Coming soon)</span>
            </div>
          {% endif %}

          <!-- Lead Robot -->
          {% if flags.lead_robot %}
            <a href="{% url 'lead_robot' %}" class="flex items-center px-3 py-2 text-sm text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200">
              <div class="w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-md flex items-center justify-center mr-3">
                <i class="fas fa-robot text-white text-xs"></i>
              </div>
              <span>Lead Robot</span>
            </a>
          {% else %}
            <div class="flex items-center px-3 py-2 text-sm text-gray-500 cursor-not-allowed">
              <div class="w-6 h-6 bg-gray-600 rounded-md flex items-center justify-center mr-3">
                <i class="fas fa-robot text-gray-400 text-xs"></i>
              </div>
              <span>Lead Robot (Coming soon)</span>
            </div>
          {% endif %}

          <!-- AI Concierge -->
          {% if flags.ai_concierge %}
            <a href="{% url 'ai_concierge' %}" class="flex items-center px-3 py-2 text-sm text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200">
              <div class="w-6 h-6 bg-gradient-to-br from-violet-500 to-violet-600 rounded-md flex items-center justify-center mr-3">
                <i class="fas fa-concierge-bell text-white text-xs"></i>
              </div>
              <span>AI Concierge</span>
            </a>
          {% else %}
            <div class="flex items-center px-3 py-2 text-sm text-gray-500 cursor-not-allowed">
              <div class="w-6 h-6 bg-gray-600 rounded-md flex items-center justify-center mr-3">
                <i class="fas fa-concierge-bell text-gray-400 text-xs"></i>
              </div>
              <span>AI Concierge (Coming soon)</span>
            </div>
          {% endif %}
        </div>
      </div>

      <!-- Other Mobile Links -->
      <a href="{% url 'use_cases' %}" class="block px-3 py-2 text-base font-medium text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200">Use Cases</a>
      <a href="{% url 'pricing' %}" class="block px-3 py-2 text-base font-medium text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200">Pricing</a>
      <a href="{% url 'case_studies' %}" class="block px-3 py-2 text-base font-medium text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200">Case Studies</a>
      <a href="{% url 'resources' %}" class="block px-3 py-2 text-base font-medium text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200">Resources</a>

      <!-- Mobile Auth Buttons -->
      <div class="pt-4 border-t border-white/10">
        {% if user.is_authenticated %}
          <a href="{% url 'dashboard' %}" class="block px-3 py-2 text-base font-medium text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200">Dashboard</a>
          <a href="{% url 'logout' %}" class="block px-3 py-2 text-base font-medium text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200">Logout</a>
        {% else %}
          <a href="{% url 'login' %}" class="block px-3 py-2 text-base font-medium text-gray-300 hover:text-white hover:bg-white/10 rounded-lg transition-all duration-200">Log in</a>
          <a href="{% url 'signup' %}" class="block w-full bg-gradient-to-r from-violet-600 to-violet-700 text-white px-4 py-2 rounded-lg hover:from-violet-700 hover:to-violet-800 transition-all duration-200 font-medium text-center mt-2 shadow-lg hover:shadow-violet-600/25">Get Started</a>
        {% endif %}
      </div>
    </div>
  </div>
</nav>
